<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Welcome to DBGMK Admin Dashboard</h1>
  </header>

  <main>
    <section>
      <h2>Admin Controls</h2>
      <button onclick="logout()">Logout</button>
    </section>

    <!-- Feedback Viewer -->
    <section>
      <h3>User Feedback</h3>
      <button id="clear-messages-button" onclick="clearAllMessages()">Clear All Messages</button>
      <div id="feedback-container">
        <p>No feedback available.</p>
      </div>
    </section>

    <!-- Message Broadcasting -->
    <section>
      <h3>Broadcast a Message</h3>
      <textarea id="broadcast-message" placeholder="Type your announcement here"></textarea>
      <button onclick="sendBroadcast()">Send Broadcast</button>
    </section>

    <!-- Theme Customizer -->
    <section>
      <h3>Change Theme</h3>
      <label for="theme-color">Select Theme Color:</label>
      <input type="color" id="theme-color" value="#007BFF">
      <button onclick="updateTheme()">Apply Theme</button>
    </section>

    <!-- Analytics -->
    <section>
      <h3>Visitor Analytics</h3>
      <p>Total Visits: <span id="visit-count">0</span></p>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 DBGMK Marketing</p>
  </footer>

  <script>
    // Check if the user is logged in
    if (sessionStorage.getItem('admin_logged_in') !== 'true') {
      window.location.href = "admin-login.html";
    }

    // Logout functionality
    function logout() {
      sessionStorage.removeItem('admin_logged_in');
      window.location.href = "admin-login.html";
    }

    // Feedback Viewer
    const feedbackContainer = document.getElementById('feedback-container');
    const feedbackMessages = JSON.parse(localStorage.getItem('feedback')) || [];

    function loadFeedback() {
      if (feedbackMessages.length > 0) {
        feedbackContainer.innerHTML = feedbackMessages
          .map(msg => `<p>${msg}</p>`)
          .join('');
      } else {
        feedbackContainer.innerHTML = "<p>No feedback available.</p>";
      }
    }
function clearAllMessages() {
  // Confirm the action
  if (confirm("Are you sure you want to clear all messages? This action cannot be undone.")) {
    // Locate the feedback container
    const feedbackContainer = document.getElementById('feedback-container');
    
    // Clear the localStorage key (if used to store messages)
    localStorage.removeItem('feedback');
    
    // Remove all messages from the UI
    feedbackContainer.innerHTML = "<p>No feedback available.</p>";
    
    // Notify the admin
    alert("All messages have been cleared!");
  }
}
    // Broadcast Message
    function sendBroadcast() {
      const message = document.getElementById('broadcast-message').value;
      if (message.trim() !== '') {
        alert(`Broadcast sent: ${message}`);
        document.getElementById('broadcast-message').value = '';
      } else {
        alert('Message cannot be empty.');
      }
    }

    // Theme Customizer
    function updateTheme() {
      const color = document.getElementById('theme-color').value;
      localStorage.setItem('themeColor', color); // Save the theme to local storage
      alert(`Theme updated to ${color}!`);
    }

    // Load visitor analytics
    const visitCount = localStorage.getItem('visitCount') || 0;
    document.getElementById('visit-count').innerText = visitCount;

    // Load feedback on page load
    loadFeedback();
  </script>
</body>
</html>
